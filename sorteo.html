<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8"/>
<title>Sorteo â€“ Cena ğŸ‰</title>
<script type="module">
const RAFFLE_FN_URL = "https://dlitmctfjzmedssrbazs.functions.supabase.co/raffle";

async function sortear() {
  const res = await fetch(RAFFLE_FN_URL, { method: 'GET' });
  if (!res.ok) { document.getElementById('out').textContent = "âŒ Error"; return; }
  const ganador = await res.json();
  if (!ganador) { document.getElementById('out').textContent = "ğŸ‰ No quedan asistentes para sortear"; return; }
  document.getElementById('out').textContent =
    `ğŸ‰ Ganador: ${ganador.nombre} (DNI ${ganador.dni}) â€“ ${ganador.rol}${ganador.lugar ? ' â€“ ' + ganador.lugar : ''}`;
}
window.sortear = sortear;
</script>
<style>
body { font-family: system-ui, Arial; max-width: 600px; margin: 24px auto; text-align:center; }
button { padding:12px 16px; font-size:16px; }
#out { margin-top:16px; font-weight:bold; }
</style>
</head>
<body>
<h1>Sorteo</h1>
<button onclick="sortear()">ğŸ Sortear siguiente</button>
<div id="out">â€”</div>
</body>
</html>
